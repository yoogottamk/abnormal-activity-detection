<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Team 34 - ESP data dashboard</title>
	<link href="{{url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
	<link href="{{url_for('static', filename='css/font-awesome.min.css') }}" rel="stylesheet">
	<link href="{{url_for('static', filename='css/datepicker3.css') }}" rel="stylesheet">
	<link href="{{url_for('static', filename='css/styles.css') }}" rel="stylesheet">

	<!--Custom Font-->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
	<script src="https://kit.fontawesome.com/a9e704d549.js" crossorigin="anonymous"></script>
</head>
<body>
	<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				    <a class="navbar-brand" href="#">Team 34 - ESP data dashboard</a>
                    <!-- TODO fix positioning -->
                    <a class="navbar-item" style="color: white; height: 100%; display: inline-block; line-height: 100%;">
                        Last updated: {{timestamp}}
	                </a>
			</div>
		</div><!-- /.container-fluid -->
	</nav>

	<div class="col-sm-8 col-sm-offset-2 col-lg-10 col-lg-offset-1 main">
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">Dashboard</h1>
			</div>
		</div><!--/.row-->

		<div class="panel panel-container">
			<div class="row">
				<div class="col-xs-4 col-md-4 col-lg-4 no-padding">
					<div class="panel panel-teal panel-widget border-right">
						<div class="row no-padding">
							<em class="fa fa-xl fa-calendar-day color-blue"></em>
							<div class="large daily-anomaly">-1</div>
							<div class="text-muted">Anomalies detected today</div>
						</div>
					</div>
				</div>
				<div class="col-xs-4 col-md-4 col-lg-4 no-padding">
					<div class="panel panel-blue panel-widget border-right">
						<div class="row no-padding">
							<em class="fa fa-xl fa-calendar-week color-blue"></em>
							<div class="large weekly-anomaly">-1</div>
							<div class="text-muted">Anomalies detected this week</div>
						</div>
					</div>
				</div>
				<div class="col-xs-4 col-md-4 col-lg-4 no-padding">
					<div class="panel panel-blue panel-widget border-right">
						<div class="row no-padding">
							<em class="fa fa-xl fa-arrow-circle-up color-red"></em>
							<em class="fa fa-xl fa-arrow-circle-down" style="color: green;"></em>
							<div class="large change-percent">-1%</div>
							<div class="text-muted">Change in anomalies this week</div>
						</div>
					</div>
				</div>
				<!--
				<div class="col-xs-6 col-md-3 col-lg-3 no-padding">
					<div class="panel panel-orange panel-widget border-right">
						<div class="row no-padding"><em class="fa fa-xl fa-users color-teal"></em>
							<div class="large">24</div>
							<div class="text-muted">New Users</div>
						</div>
					</div>
				</div>
				<div class="col-xs-6 col-md-3 col-lg-3 no-padding">
					<div class="panel panel-red panel-widget ">
						<div class="row no-padding"><em class="fa fa-xl fa-search color-red"></em>
							<div class="large">25.2k</div>
							<div class="text-muted">Page Views</div>
						</div>
					</div>
				</div>
				-->
			</div><!--/.row-->
		</div>
		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						Site Traffic Overview
						<span class="pull-right clickable panel-toggle panel-button-tab-left"><em class="fa fa-toggle-up"></em></span></div>
					<div class="panel-body">
						<div class="canvas-wrapper">
							<canvas class="main-chart" id="myChart" height="200" width="600"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div><!--/.row-->

		<div class="row">
			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>New Orders</h4>
						<div class="easypiechart" id="easypiechart-blue" data-percent="92" ><span class="percent">92%</span></div>
					</div>
				</div>
			</div>

			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>Comments</h4>
						<div class="easypiechart" id="easypiechart-orange" data-percent="65" ><span class="percent">65%</span></div>
					</div>
				</div>
			</div>

			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>New Users</h4>
						<div class="easypiechart" id="easypiechart-teal" data-percent="56" ><span class="percent">56%</span></div>
					</div>
				</div>
			</div>

			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>Visitors</h4>
						<div class="easypiechart" id="easypiechart-red" data-percent="27" ><span class="percent">27%</span></div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<script src="{{url_for('static', filename='js/jquery-1.11.1.min.js') }}"></script>
	<script src="{{url_for('static', filename='js/bootstrap.min.js') }}"></script>
	<script src="{{url_for('static', filename='js/chart.min.js') }}"></script>
	<script src="{{url_for('static', filename='js/chart-data.js') }}"></script>
	<script src="{{url_for('static', filename='js/easypiechart.js') }}"></script>
	<script src="{{url_for('static', filename='js/easypiechart-data.js') }}"></script>
	<script src="{{url_for('static', filename='js/bootstrap-datepicker.js') }}"></script>
	<script src="{{url_for('static', filename='js/custom.js') }}"></script>
	<script src="{{url_for('static', filename='js/plot.js') }}"></script>

	<script>
        const AUTO_RELOAD_TIME = 2000;
        let AUTO_RELOAD_ENABLED = true;

        if(`{{auto_reload}}`.trim() == "False"){
            AUTO_RELOAD_ENABLED = false;
        }

        window.addEventListener("load", function(){
            const inString = `{{input}}`.trim();
            const outString = `{{output}}`.trim();
            const step = `{{step}}`.trim();

            processData(inString, outString, step, AUTO_RELOAD_ENABLED);
        });
	</script>

    <style>
        #myChart{
            margin: 0;
            height: 30% !important;
        }
    </style>
</body>
</html>
